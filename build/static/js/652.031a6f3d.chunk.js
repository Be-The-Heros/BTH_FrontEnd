/*! For license information please see 652.031a6f3d.chunk.js.LICENSE.txt */
(self.webpackChunkbtn_frontend=self.webpackChunkbtn_frontend||[]).push([[652],{56652:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return H}});var i,t=r(18489),s=r(36222),a=r(31303),o=r(50678),l=r(54905),c=r(17300),d=r(70685),u=r(59491),p=r(49080),h=r(83061),m=r(19457),f=r(69453),v=function(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/\xe0|\xe1|\u1ea1|\u1ea3|\xe3|\xe2|\u1ea7|\u1ea5|\u1ead|\u1ea9|\u1eab|\u0103|\u1eb1|\u1eaf|\u1eb7|\u1eb3|\u1eb5/g,"a")).replace(/\xe8|\xe9|\u1eb9|\u1ebb|\u1ebd|\xea|\u1ec1|\u1ebf|\u1ec7|\u1ec3|\u1ec5/g,"e")).replace(/\xec|\xed|\u1ecb|\u1ec9|\u0129/g,"i")).replace(/\xf2|\xf3|\u1ecd|\u1ecf|\xf5|\xf4|\u1ed3|\u1ed1|\u1ed9|\u1ed5|\u1ed7|\u01a1|\u1edd|\u1edb|\u1ee3|\u1edf|\u1ee1/g,"o")).replace(/\xf9|\xfa|\u1ee5|\u1ee7|\u0169|\u01b0|\u1eeb|\u1ee9|\u1ef1|\u1eed|\u1eef/g,"u")).replace(/\u1ef3|\xfd|\u1ef5|\u1ef7|\u1ef9/g,"y")).replace(/\u0111/g,"d")).replace(/\xc0|\xc1|\u1ea0|\u1ea2|\xc3|\xc2|\u1ea6|\u1ea4|\u1eac|\u1ea8|\u1eaa|\u0102|\u1eb0|\u1eae|\u1eb6|\u1eb2|\u1eb4/g,"A")).replace(/\xc8|\xc9|\u1eb8|\u1eba|\u1ebc|\xca|\u1ec0|\u1ebe|\u1ec6|\u1ec2|\u1ec4/g,"E")).replace(/\xcc|\xcd|\u1eca|\u1ec8|\u0128/g,"I")).replace(/\xd2|\xd3|\u1ecc|\u1ece|\xd5|\xd4|\u1ed2|\u1ed0|\u1ed8|\u1ed4|\u1ed6|\u01a0|\u1edc|\u1eda|\u1ee2|\u1ede|\u1ee0/g,"O")).replace(/\xd9|\xda|\u1ee4|\u1ee6|\u0168|\u01af|\u1eea|\u1ee8|\u1ef0|\u1eec|\u1eee/g,"U")).replace(/\u1ef2|\xdd|\u1ef4|\u1ef6|\u1ef8/g,"Y")).replace(/\u0110/g,"D")).replace(/\u0300|\u0301|\u0303|\u0309|\u0323/g,"")).replace(/\u02C6|\u0306|\u031B/g,"")},g=r(13286),x=r(33032),j=r(84322),Z=r.n(j),b=r(62716),w=r(11822),y=r.n(w),N=r(40056),_=r(24e3),C=r(35367),z=r.n(C),k=r(24569),S=r.n(k),P=r(47313),R=r(80614),L=r(75627),q=r(57864),E=r(37394),F=r(97890),O=r(8512),U=r(64605),I=r(17778),D=r(10714),T=r(21168),A=r(17186),M=r(49814).ZP.div(i||(i=(0,A.Z)(["\n  padding: 2% 5em;\n  .header {\n    font-size: 1rem;\n    font-weight: bold;\n    --distance: -2rem;\n    padding-bottom: 0.25rem;\n    .slide-right {\n      padding-bottom: 10px;\n      width: 100%;\n      overflow: hidden;\n      /* margin-left: var(--distance); */\n      animation: 2s slide-right 2s forwards;\n      transform: translateX(-100%);\n      font-size: 1.5rem;\n    }\n\n    @keyframes slide-right {\n      to {\n        transform: translateX(0);\n      }\n    }\n  }\n\n  .content {\n    background-color: var(--white);\n    min-height: 100vh;\n    padding: 2% 3%;\n    border-radius: 0.5rem;\n    .form-input {\n      position: relative;\n      margin: 1em 0;\n\n      label {\n        margin: 0.25rem 0;\n        font-size: 1rem;\n      }\n\n      .waring-error {\n        margin-top: 0.25rem;\n        color: red;\n        display: block;\n      }\n    }\n    .dropzone {\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      padding: 20px;\n      border-width: 2px;\n      border-radius: 2px;\n      border-color: #eeeeee;\n      border-style: dashed;\n      background-color: #fafafa;\n      color: #bdbdbd;\n      outline: none;\n      transition: border 0.24s ease-in-out;\n    }\n    .dropzone:focus {\n      border-color: #2196f3;\n    }\n    .thumb-file {\n      display: flex;\n    }\n\n    .item-image {\n      padding-bottom: 0 !important;\n      padding-top: 0 !important;\n      padding-left: 0;\n    }\n    /* .final-image {\n      filter: blur(0.25px);\n    } */\n    .icon-safe {\n      font-size: 1.25rem;\n      position: absolute;\n      right: 1rem;\n      top: 25%;\n    }\n  }\n  .introduction {\n    padding: 0 2rem;\n  }\n  .ant-image {\n    height: 100%;\n  }\n  .create-url-post {\n    span {\n      &:hover {\n        text-decoration: underline;\n        color: var(--bs-primary);\n      }\n    }\n  }\n"]))),Q=r(46417),V=l.Z.Option,H=function(){var e,n=(0,F.s0)(),r=(0,U.sJ)(I.K),i=(0,L.cI)(),j=i.handleSubmit,w=i.control,C=i.watch,k=i.setValue,A=i.formState.errors,H=P.useRef(),Y=P.useState(!1),B=(0,o.Z)(Y,2),J=B[0],W=B[1],X=P.useState(!1),G=(0,o.Z)(X,2),K=G[0],$=G[1],ee=P.useState(Math.floor(Math.random()*m.w.length)),ne=(0,o.Z)(ee,2),re=ne[0],ie=ne[1],te=P.useState([]),se=(0,o.Z)(te,2),ae=se[0],oe=se[1],le=P.useState({province:"",district:"",ward:""}),ce=(0,o.Z)(le,2),de=ce[0],ue=ce[1],pe=P.useState({title:"",size:0}),he=(0,o.Z)(pe,2),me=he[0],fe=he[1],ve=(0,N.useMutation)(function(){var e=(0,x.Z)(Z().mark((function e(n){var r,i;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new FormData,null===(i=n.photos)||void 0===i||i.forEach((function(e){r.append("files",e)})),Object.keys(n).forEach((function(e){var i=n[e];i&&"object"!==typeof i&&r.append(e,y()(i))})),e.abrupt("return",b.ZP.post(_.V,"/create",{body:r}));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),ge=(0,R.uI)({accept:["image/*","video/*"],onDrop:function(e){var n=e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})}));n.length+ae.length>m.j?O.Am.warning("You can only upload 10 images"):oe([].concat((0,a.Z)(ae),(0,a.Z)(n)))}}),xe=ge.getRootProps,je=ge.getInputProps;P.useEffect((function(){if(O.Am.dismiss(),!ve.isLoading)return ve.isSuccess?(ae.forEach((function(e){return URL.revokeObjectURL(e.preview)})),O.Am.success("Creating post success"),void n("/post/detail/".concat(ve.data.post_id))):void 0;O.Am.loading("Creating post...")}),[ve.isLoading,ve.isSuccess,null===(e=ve.data)||void 0===e?void 0:e.post_id]),P.useEffect((function(){H.current=setInterval((function(){var e=Math.floor(Math.random()*m.w.length);ie(e)}),3e3)}),[]);P.useEffect((function(){return function(){ae.forEach((function(e){return URL.revokeObjectURL(e.preview)})),clearInterval(H.current)}}),[]);return(0,Q.jsxs)(M,{className:"create-post-page",children:[(0,Q.jsx)(T.z,{content:C("content"),avatar:r.avatar,fullname:r.first_name+" "+r.last_name,joined:1e3,join_url:C("join_url"),title:C("title"),visible:J,ward:(0,f.ev)(de.ward),district:(0,f._h)(de.district),province:(0,f.ol)(de.province),onCancel:function(){return W(!1)},residential_address:C("residential_address"),photos:ae.map((function(e){return e.preview}))}),(0,Q.jsxs)("form",{onSubmit:j((function(e){var n=(0,f.ol)(e.id_province),r=(0,f.ev)(e.id_ward),i=(0,f._h)(e.id_district);ve.mutate((0,t.Z)((0,t.Z)({},e),{},{province:n,district:i,ward:r,photos:ae,isCreateChat:K}))})),children:[(0,Q.jsx)("div",{className:"header",children:(0,Q.jsx)("div",{className:"slide-right",children:m.w[re]})}),(0,Q.jsxs)("div",{className:"d-flex",children:[(0,Q.jsxs)("div",{className:"content w-70",children:[(0,Q.jsxs)("div",{className:"form-input",children:[(0,Q.jsx)("label",{children:"Title"}),(0,Q.jsx)(L.Qr,{name:"title",control:w,rules:{required:!0},defaultValue:"",render:function(e){var n=e.field;return(0,Q.jsx)(d.Z,(0,t.Z)((0,t.Z)({},n),{},{placeholder:"Enter Title",onFocus:function(e){var n=e.target.scrollHeight;fe({title:"title",size:n})}}))}}),A.title&&(0,Q.jsx)("span",{className:"waring-error",children:"Title is required"})]}),(0,Q.jsxs)("div",{className:"form-input",children:[(0,Q.jsx)("label",{className:"w-100",children:"Residence"}),(0,Q.jsx)(L.Qr,{name:"id_province",control:w,rules:{required:!0},render:function(e){var n=e.field;return(0,Q.jsxs)(l.Z,(0,t.Z)((0,t.Z)({defaultValue:"",showSearch:!0},n),{},{className:"col-4",style:{paddingLeft:"0"},onFocus:function(){fe({title:"address",size:me.size})},optionFilterProp:"children",filterOption:function(e,n){return v(z()(null===n||void 0===n?void 0:n.children)).includes(v(z()(e)))},onChange:function(e){ue((0,t.Z)((0,t.Z)({},de),{},{province:e})),n.onChange(e),k("id_district",""),k("id_ward","")},children:[(0,Q.jsx)(V,{value:"",children:"Please Choose Province"}),(0,f.lv)().map((function(e){return(0,Q.jsx)(V,{value:e.idProvince,children:e.name},e.idProvince)}))]}))}}),(0,Q.jsx)(L.Qr,{name:"id_district",control:w,rules:{required:!0},render:function(e){var n=e.field;return(0,Q.jsx)(P.Fragment,{children:(0,Q.jsxs)(l.Z,(0,t.Z)((0,t.Z)({defaultValue:"",className:"col-4",style:{paddingRight:"0"}},n),{},{onFocus:function(){fe({title:"address",size:me.size})},showSearch:!0,filterOption:function(e,n){return v(z()(null===n||void 0===n?void 0:n.children)).includes(v(z()(e)))},onChange:function(e){ue((0,t.Z)((0,t.Z)({},de),{},{district:e})),n.onChange(e)},children:[(0,Q.jsx)(V,{value:"",children:"Please Choose District"}),(0,f.dd)(de.province).map((function(e){return(0,Q.jsx)(V,{value:e.idDistrict,children:e.name},e.idDistrict)}))]}))})}}),(0,Q.jsx)(L.Qr,{name:"id_ward",control:w,rules:{required:!0},render:function(e){var n=e.field;return(0,Q.jsxs)(l.Z,(0,t.Z)((0,t.Z)({},n),{},{className:"col-4",defaultValue:"",style:{paddingRight:"0"},onFocus:function(){fe({title:"address",size:me.size})},showSearch:!0,filterOption:function(e,n){return v(z()(null===n||void 0===n?void 0:n.children)).includes(v(z()(e)))},onChange:function(e){ue((0,t.Z)((0,t.Z)({},de),{},{ward:e})),n.onChange(e)},children:[(0,Q.jsx)(V,{value:"",children:"Please Choose Ward"}),(0,f.mN)(de.district).map((function(e){return(0,Q.jsx)(V,{value:e.idCommune,children:e.name},e.idCommune)}))]}))}}),A.id_province&&(0,Q.jsx)("span",{className:"waring-error",children:"Province is required"}),!A.id_province&&A.id_district&&(0,Q.jsx)("span",{className:"waring-error",children:"District is required"}),!A.id_province&&!A.id_district&&A.id_ward&&(0,Q.jsx)("span",{className:"waring-error",children:"Ward is required"})]}),(0,Q.jsxs)("div",{className:"form-input",children:[(0,Q.jsx)("label",{children:"Resident address"}),(0,Q.jsx)(L.Qr,{name:"residential_address",control:w,rules:{required:!0,pattern:/^[a-zA-Z0-9\s]*$/},render:function(e){var n=e.field;return(0,Q.jsx)(d.Z,(0,t.Z)((0,t.Z)({},n),{},{onFocus:function(){fe({title:"resident_address",size:me.size})},placeholder:"Enter resident address",onBlur:function(e){n.onChange(e.target.value.split(" ").map((function(e){return S()(e)})).join(" "))}}))}}),A.residential_address&&(0,Q.jsx)("span",{className:"waring-error",children:"Resident address invalid"})]}),(0,Q.jsxs)("div",{className:"form-input",children:[(0,Q.jsx)("label",{children:" Content"}),(0,Q.jsx)(L.Qr,{name:"content",rules:{required:!0},control:w,render:function(e){var n=e.field;return(0,Q.jsx)(p.default,(0,t.Z)((0,t.Z)({},n),{},{onFocus:function(){fe((0,t.Z)((0,t.Z)({},me),{},{title:"content"}))},placeholder:"Explain your post",style:{height:"200px"},autoSize:!0,onChange:function(e){var r=e.target.scrollHeight;fe({title:"content",size:r}),n.onChange(e.target.value)}}))}}),A.content&&(0,Q.jsx)("span",{className:"waring-error",children:"Content required"})]}),(0,Q.jsxs)("div",{className:"form-input",children:[(0,Q.jsx)("label",{children:"URL chat room"}),!K&&(0,Q.jsx)(L.Qr,{name:"join_url",rules:{required:!1,validate:function(e){return!e||(0,g.b)(e||"")||""===(null===e||void 0===e?void 0:e.trim())}},control:w,render:function(e){var n=e.field;return(0,Q.jsxs)("div",{className:"w-50 position-relative",children:[(0,Q.jsx)(d.Z,(0,t.Z)((0,t.Z)({},n),{},{onFocus:function(){fe((0,t.Z)((0,t.Z)({},me),{},{title:"chat"}))},style:{paddingRight:"3rem"},placeholder:"Example: https://t.me/+de5i4MvIBAMzYmY1"})),(0,Q.jsx)(q.HL2,{className:"icon-safe",color:(0,g.b)(C("join_url"))?"var(--bs-success)":"var(--bs-danger)"})]})}}),K&&(0,Q.jsx)("div",{children:(0,Q.jsxs)("strong",{children:[" ","we will create a chat room, once you create the post successfully. Join the chat room by clicking the join button"]})}),(0,Q.jsx)("div",{className:"create-url-post",onClick:function(){return $(!K)},children:K?(0,Q.jsx)("span",{style:{cursor:"pointer",marginTop:"0.5rem",color:"var(--bs-cyan)"},children:"I have a chat room ?"}):(0,Q.jsx)("span",{style:{cursor:"pointer",marginTop:"0.5rem"},children:"Create chat room from site"})}),A.join_url&&(0,Q.jsx)("span",{className:"waring-error",children:"Url is not valid"})]}),(0,Q.jsxs)("div",{className:"form-input",onFocus:function(){fe({title:"photo",size:me.size})},children:[(0,Q.jsx)("label",{children:"Upload Image"}),(0,Q.jsx)("input",(0,t.Z)({},je())),(0,Q.jsxs)("div",(0,t.Z)((0,t.Z)({},xe({className:"dropzone"})),{},{children:[(0,Q.jsx)("input",(0,t.Z)({},je())),(0,Q.jsx)("p",{children:"Drag 'n' drop some files here, or click to select files"})]})),(0,Q.jsx)("aside",{children:(0,Q.jsx)("div",{className:"d-flex w-100 flex-wrap preview",style:{margin:"1rem 0"},children:(0,Q.jsx)(c.Z.PreviewGroup,{children:ae.map((function(e,n){var r=(0,h.Z)((0,s.Z)({},"pl-0",(n+1)%3===1),"col-4 item-image");return(0,Q.jsx)("div",{className:r,children:(0,Q.jsxs)("div",{className:"w-100 h-100",style:{marginTop:"0.25rem",position:"relative"},children:[(0,Q.jsx)(c.Z,{src:e.preview,style:{objectFit:"cover"},alt:"preview"}),(0,Q.jsx)(E.HLd,{style:{position:"absolute",top:"0.25rem",right:"0.25rem",fontSize:"1.25rem",cursor:"pointer"},onClick:function(){return oe((0,a.Z)(ae.filter((function(e,r){return r!==n}))))}})]})},n)}))})})})]}),(0,Q.jsxs)("div",{className:"form-input d-flex justify-content-around",style:{marginTop:"1rem"},children:[(0,Q.jsx)(u.Z,{type:"primary",htmlType:"submit",disabled:ve.isLoading,children:"Publish"}),(0,Q.jsx)(u.Z,{type:"default",onClick:function(){return W(!0)},children:"Preview"})]})]}),(0,Q.jsx)("div",{className:"w-30 introduction",children:(0,Q.jsx)(D.Z,(0,t.Z)({},me))})]})]})]})}},35367:function(e,n,r){var i=r(11822);e.exports=function(e){return i(e).toLowerCase()}}}]);